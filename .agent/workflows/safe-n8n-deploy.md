---
description: –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ n8n + —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ workflow –∏–ª–∏ –ª–æ–≥–∏–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
---

# üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞: n8n + –§—Ä–æ–Ω—Ç–µ–Ω–¥

## –ó–û–õ–û–¢–û–ï –ü–†–ê–í–ò–õ–û

> **–ù–ò–ö–û–ì–î–ê –Ω–µ –≤–Ω–æ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ —Ä–∞–±–æ—á–∏–π (–ü–†–û–î) workflow n8n.**
> –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–π —á–µ—Ä–µ–∑ –¢–ï–°–¢–û–í–´–ô –∫–ª–æ–Ω.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –¥–≤–∞ workflow

–£ –Ω–∞—Å –í–°–ï–ì–î–ê —Å—É—â–µ—Å—Ç–≤—É—é—Ç 2 workflow –≤ n8n:

| | –ü–†–û–î | –¢–ï–°–¢ |
|---|---|---|
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | `AI CITI –∫–∞—Ä—É—Å–µ–ª–∏ v3` | `AI CITI –∫–∞—Ä—É—Å–µ–ª–∏ v3 ‚Äî TEST` |
| **Webhook** | `/webhook/carousel-v2` | `/webhook/carousel-test` |
| **–ö—Ç–æ –≤–∏–¥–∏—Ç** | –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã |
| **–ö–æ–≥–¥–∞ –º–µ–Ω—è—Ç—å** | –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ | –°–≤–æ–±–æ–¥–Ω–æ |

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"
        ‚îÇ
        ‚ñº
   isAdmin(userId)?
        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ –î–ê   ‚îÇ –ù–ï–¢
    ‚ñº       ‚ñº
  –¢–ï–°–¢    –ü–†–û–î
webhook  webhook
```

–ê–¥–º–∏–Ω—ã —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ **–ø—Ä—è–º–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏** —á–µ—Ä–µ–∑ Telegram ‚Äî –≤—ã–≥–ª—è–¥–∏—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –Ω–æ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ —Ä–∞–∑–Ω—ã–µ webhook'–∏.

---

## üìã –ü–æ—Ä—è–¥–æ–∫ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –®–∞–≥ 1: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```
‚òê –û–ø–∏—Å–∞—Ç—å —á—Ç–æ –º–µ–Ω—è–µ–º –∏ –∑–∞—á–µ–º
‚òê –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –Ω–æ–¥—ã –≤ n8n
‚òê –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
‚òê –ü–æ–ª—É—á–∏—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¢–ï–°–¢–û–í–û–ú workflow
```
‚òê –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π JSON —Ç–µ—Å—Ç–æ–≤–æ–≥–æ workflow —á–µ—Ä–µ–∑ API
‚òê –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω—É–∂–Ω—ã–µ –Ω–æ–¥—ã
‚òê –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π JSON —á–µ—Ä–µ–∑ API
‚òê –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π workflow –∞–∫—Ç–∏–≤–µ–Ω
```

### –®–∞–≥ 3: –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```
‚òê git checkout develop
‚òê –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Å admin-gate –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
‚òê npm run build ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∏–ª–¥
‚òê git commit && git push
‚òê –î–µ–ø–ª–æ–π –Ω–∞ Vercel (develop ‚Üí preview)
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
‚òê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–∞–¥–º–∏–Ω) —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –≤ Telegram
‚òê –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±—ã—á–Ω—ã–µ —é–∑–µ—Ä—ã –ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
‚òê –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚òê –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "–í—Å—ë –æ–∫, –∑–∞–ª–∏–≤–∞–π"
```

### –®–∞–≥ 5: –ü–µ—Ä–µ–Ω–æ—Å –≤ –ü–†–û–î
```
‚òê –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –Ω–æ–¥—ã –∏–∑ –¢–ï–°–¢ ‚Üí –ü–†–û–î workflow
‚òê –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ü–†–û–î workflow –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚òê –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ: —É–±—Ä–∞—Ç—å admin-gate (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) ‚Üí develop ‚Üí main
‚òê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±—ç–∫–∞–ø –ø—Ä–æ–¥ workflow JSON –≤ –ø—Ä–æ–µ–∫—Ç
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª—É—á–∏—Ç—å workflow JSON
```bash
curl -s https://n8n.iferma.pro/api/v1/workflows/{WORKFLOW_ID} \
  -H "X-N8N-API-KEY: {KEY}" > workflow_backup.json
```

### –û–±–Ω–æ–≤–∏—Ç—å workflow
```bash
# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å payload (—Ç–æ–ª—å–∫–æ name, nodes, connections, settings)
curl -s -X PUT https://n8n.iferma.pro/api/v1/workflows/{WORKFLOW_ID} \
  -H "X-N8N-API-KEY: {KEY}" \
  -H "Content-Type: application/json" \
  -d @payload.json
```

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π workflow (–∫–ª–æ–Ω)
```bash
curl -s -X POST https://n8n.iferma.pro/api/v1/workflows \
  -H "X-N8N-API-KEY: {KEY}" \
  -H "Content-Type: application/json" \
  -d @new_workflow.json
```

### –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å)
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
curl -s -X PUT https://n8n.iferma.pro/api/v1/workflows/{WORKFLOW_ID} \
  -H "X-N8N-API-KEY: {KEY}" \
  -H "Content-Type: application/json" \
  -d @workflow_backup.json
```

---

## üö´ –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã (–ù–ò–ö–û–ì–î–ê –Ω–µ –¥–µ–ª–∞–π)

| ‚ùå –ü–ª–æ—Ö–æ | ‚úÖ –•–æ—Ä–æ—à–æ |
|---|---|
| –ú–µ–Ω—è—Ç—å –ü–†–û–î workflow –Ω–∞–ø—Ä—è–º—É—é | –ú–µ–Ω—è—Ç—å –¢–ï–°–¢–û–í–´–ô, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å curl —Å —Ä–µ–∞–ª—å–Ω—ã–º chatId | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–π chatId –∞–¥–º–∏–Ω–∞ |
| –î–µ–ø–ª–æ–∏—Ç—å –±–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–∏—è | –ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω ‚Üí –ø–æ–ª—É—á–∏—Ç—å –û–ö ‚Üí –¥–µ–ø–ª–æ–∏—Ç—å |
| –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∞ | –°–ø—Ä–æ—Å–∏—Ç—å —é–∑–µ—Ä–∞ –ø–µ—Ä–µ–¥ –ª—é–±–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π (—ç—Ç–æ –¥–µ–Ω—å–≥–∏!) |
| –ú–µ—Ä–∂–∏—Ç—å –≤ main –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ | develop ‚Üí preview ‚Üí —Ç–µ—Å—Ç ‚Üí main |

---

## üîë ID workflow

| Workflow | ID | Webhook path |
|---|---|---|
| **–ü–†–û–î** | `RgapTTGAu6acuaGc` | `/webhook/carousel-v2` |
| **–¢–ï–°–¢** | *—Å–æ–∑–¥–∞—Ç—å* | `/webhook/carousel-test` |

---

## üì¶ –ë—ç–∫–∞–ø—ã

–ü–µ—Ä–µ–¥ –õ–Æ–ë–´–ú –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º workflow:
1. –°–∫–∞—á–∞—Ç—å —Ç–µ–∫—É—â–∏–π JSON —á–µ—Ä–µ–∑ API
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç: `docs/n8n-backups/carousel-v3-YYYY-MM-DD.json`
3. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –≤ develop

---

## üéõÔ∏è Admin-gate –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

```tsx
// –í —Ñ–∞–π–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (index.tsx)
import { isAdmin } from '@/config/admins'
import { getTelegramUser } from '@/lib/telegram'

const user = getTelegramUser()
const webhookUrl = isAdmin(user?.id)
  ? 'https://n8n.iferma.pro/webhook/carousel-test'   // –¢–ï–°–¢
  : 'https://n8n.iferma.pro/webhook/carousel-v2'      // –ü–†–û–î

const response = await fetch(webhookUrl, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(payload)
})
```

–ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –≤ –ø—Ä–æ–¥ ‚Äî —É–±—Ä–∞—Ç—å —É—Å–ª–æ–≤–∏–µ –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥ URL.
